$.fn.readMore=function(t){var a,e=$.extend({showLines:8,showParagraph:!1,linkCaption:"read more",linkCloseCaption:"read less",linkHint:"Click to see full article",animationSpeed:800,previewTextOnly:!0},t);$(document).ready(function(){$(".jrm-truncate").each(function(t){var i,n,s,o,l,r=t+1,d=$(this).outerHeight();$(this).addClass("jrm-"+r),$(this).children(":first-child").append('<div id="Temp">&nbsp;</div>'),a=$("#Temp").height(),$("#Temp").remove,s=parseFloat($(this).children(":first-child").css("margin-top")),0!=s&&($(this).css("margin-top",s),$(this).children(":first-child").css("margin-top",0)),e.showParagraph||-1==$(this).attr("data-lines")?n=parseFloat($(this).children("p:first-child").outerHeight()):(i=$(this).attr("data-lines")?parseFloat($(this).attr("data-lines")):parseFloat(e.showLines),n=i*parseFloat(a)),o=$(this).attr("data-link-caption")?$(this).attr("data-link-caption"):e.linkCaption,l=$(this).attr("data-link-closecaption")?$(this).attr("data-link-closecaption"):e.linkCloseCaption,d>n&&($(this).css("height",n).addClass("jrm-reduced"),$('<span class="jrm-toggle" data-id="'+r+'" title="'+e.linkHint+'">'+o+"</span>").insertAfter($(this)),e.previewTextOnly&&$(this).addClass("jrm-textOnly"))}),$(".jrm-toggle").click(function(){var t=$(this),n=t.parent().children(".jrm-"+t.attr("data-id"));if(e.showParagraph||-1==n.attr("data-lines")?sectionHeight=parseFloat(n.children("p:first-child").outerHeight()):(n.attr("data-lines")?sectionLines=parseFloat(n.attr("data-lines")):sectionLines=parseFloat(e.showLines),sectionHeight=sectionLines*parseFloat(a)),n.attr("data-link-caption")?linkCaption=n.attr("data-link-caption"):linkCaption=e.linkCaption,n.attr("data-link-closecaption")?linkCloseCaption=n.attr("data-link-closecaption"):linkCloseCaption=e.linkCloseCaption,n.hasClass("jrm-reduced")){setTimeout(function(){n.removeClass("jrm-reduced")},1);var s=n.children().length,o=0;for(i=1;i<s+1;i++)o+=n.children(":nth-child("+i+")").outerHeight(!0);n.animate({height:o},e.animationSpeed),setTimeout(function(){t.text(linkCloseCaption).attr("title",""),$(window).resize()},e.animationSpeed)}else n.animate({height:sectionHeight},e.animationSpeed),setTimeout(function(){t.text(linkCaption).attr("title",e.linkHint),n.addClass("jrm-reduced"),$(window).resize()},e.animationSpeed)})})};
